{"meta":{"title":"sbwit的博客","subtitle":"干就完了","description":"","author":"sbwit","url":"https://www.sbwit.com","root":"/"},"pages":[{"title":"friends","date":"2021-04-14T06:06:32.000Z","updated":"2021-04-16T03:38:51.647Z","comments":true,"path":"friends/index.html","permalink":"https://www.sbwit.com/friends/index.html","excerpt":"","text":""},{"title":"tags","date":"2021-04-14T06:05:35.000Z","updated":"2021-04-16T03:38:51.649Z","comments":true,"path":"tags/index.html","permalink":"https://www.sbwit.com/tags/index.html","excerpt":"","text":""},{"title":"about","date":"2021-04-14T06:06:10.000Z","updated":"2021-04-16T03:38:51.644Z","comments":true,"path":"about/index.html","permalink":"https://www.sbwit.com/about/index.html","excerpt":"","text":""},{"title":"categories","date":"2021-04-14T06:04:47.000Z","updated":"2021-04-16T03:38:51.646Z","comments":true,"path":"categories/index.html","permalink":"https://www.sbwit.com/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"DEMO","slug":"yuque/DEMO","date":"2017-12-13T15:40:07.000Z","updated":"2021-04-19T01:53:19.108Z","comments":true,"path":"2017/12/13/yuque/DEMO/","link":"","permalink":"https://www.sbwit.com/2017/12/13/yuque/DEMO/","excerpt":"","text":"name: Blog CI/CD on: [push, repository_dispatch] jobs: blog-cicd: name: Hexo blog build &amp; deploy runs-on: ubuntu-latest env: TZ: Asia/Shanghai steps: - name: Checkout codes uses: actions/checkout@v2 - name: Setup node uses: actions/setup-node@v1 with: node-version: '12.x' - name: Cache node modules uses: actions/cache@v1 with: path: ~/.npm key: $&#123;&#123; runner.os &#125;&#125;-node-$&#123;&#123; hashFiles('**/package-lock.json') &#125;&#125; - name: Install dependencies run: | npm install hexo-cli -g npm install yuque-hexo -g npm install yuque-hexo sync - name: Generate files run: hexo generate - name: Deploy blog evn: Github_Pages: github.com/sbwit/sbwit.github.io Github_Token: $&#123;&#123; secrets.TOKEN_GITHUBAPI &#125;&#125; run: | git clone \"https://$&#123;Github_Pages&#125;\" deploy_git mv ./deploy_git/.git ./public/ cd ./public git config user.name \"sbwit\" git config user.email \"17740857130@qq.com\" git add . git commit -m \"GitHub Actions Auto Builder at $(date +'%Y-%m-%d %H:%M:%S')\" git push --force --quiet \"https://$&#123;Github_Token&#125;@$&#123;Github_Pages&#125;\" master:master # -*- coding: utf8 -*- import requests def main_handler(event, context): r = requests.post(\"https://api.github.com/repos/sbwit/sbwit.hexo/dispatches\", json = &#123;\"event_type\": \"start\"&#125;, headers = &#123;\"User-Agent\":'curl/7.52.1', 'Content-Type': 'application/json', 'Accept': 'application/vnd.github.everest-preview+json', 'Authorization': 'token GITHUB_TOKEN(自己的)'&#125;) if r.status_code == 204: return \"This's OK!\" else: return r.status_code 官方的配置 # workflow name name: CI Hexo # master branch on push, auto run on: push: branches: - master jobs: Deploy-Pages: name: Deploy Hexo Public To Pages runs-on: ubuntu-latest steps: # check it to your workflow can access it # from: https://github.com/actions/checkout - name: Checkout Repository master branch uses: actions/checkout@master # from: https://github.com/actions/setup-node - name: Setup Node.js 10.x uses: actions/setup-node@master with: node-version: \"12.14\" - name: Setup Git Infomation run: | git config --global user.name 'sbwit' git config --global user.email '17740857130@163.com' - name: Get Latest Commit Message run: | git log --pretty=format:\"%s from Github Actions at `date +\"%Y-%m-%d %H:%M:%S\"`\" --date=short -n 1 > commit-message.log - name: Setup Hexo Dependencies run: | npm install hexo-cli -g npm install - name: Generate public files run: | hexo clean hexo generate - name: Deploy To Github Pages env: Github_Pages: github.com/sbwit/sbwit.github.io Github_Token: $&#123;&#123; secrets.TOKEN_GITHUBAPI &#125;&#125; run: | git clone https://$&#123;Github_Pages&#125; .github_pages cd .github_pages git checkout master cd ../ mv .github_pages/.git/ ./public/ cd ./public/ git add . git commit -F ../commit-message.log git push --force --quiet \"https://$&#123;Github_Token&#125;@$&#123;Github_Pages&#125;\" master:master","categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://www.sbwit.com/categories/Hexo/"}],"tags":[{"name":"博客搭建","slug":"博客搭建","permalink":"https://www.sbwit.com/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"},{"name":"Hexo","slug":"Hexo","permalink":"https://www.sbwit.com/tags/Hexo/"},{"name":"Github","slug":"Github","permalink":"https://www.sbwit.com/tags/Github/"}]}],"categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://www.sbwit.com/categories/Hexo/"}],"tags":[{"name":"博客搭建","slug":"博客搭建","permalink":"https://www.sbwit.com/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"},{"name":"Hexo","slug":"Hexo","permalink":"https://www.sbwit.com/tags/Hexo/"},{"name":"Github","slug":"Github","permalink":"https://www.sbwit.com/tags/Github/"}]}